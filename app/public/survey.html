<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Survey Says!</title>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
	<link rel="stylesheet" type="text/css" href="assets/css/main.css">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
	<link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">

</head>
<body>
	<div class = 'container'>
		<h2>Survey Questions</h2>
		<hr>
		<h3>About You</h3>
		<h4>Name (required)</h4>
		<input type = 'text' id = 'name' class = 'form-control' required>
		<h4>Link to Photo of Yourself (required)</h4>
		<input type = 'text' id = 'photo' class = 'form-control' required>

		<hr>
		<h3><strong>Question 1</strong></h3>
		<h4>Your mind is always buzzing with unexplored ideas and plans.</h4>
		<select class ='form-control' id = "q1">
			<option value></option>
			<option value = '1'>1 (Strongly Disagree)</option>
			<option value = '2'>2</option>
			<option value = '3'>3</option>
			<option value = '4'>4</option>
			<option value = '5'>5 (Strongly Agree)</option>
		</select>

		<h3><strong>Question 2</strong></h3>
		<h4>Generally speaking, you rely more on your experience than your imagination.</h4>
		<select class ='form-control' id = "q2">
			<option value></option>
			<option value = '1'>1 (Strongly Disagree)</option>
			<option value = '2'>2</option>
			<option value = '3'>3</option>
			<option value = '4'>4</option>
			<option value = '5'>5 (Strongly Agree)</option>
		</select>

		<h3><strong>Question 3</strong></h3>
		<h4>You find it easy to stay relaxed and focused even when there is some pressure.</h4>
		<select class ='form-control' id = "q3">
			<option value></option>
			<option value = '1'>1 (Strongly Disagree)</option>
			<option value = '2'>2</option>
			<option value = '3'>3</option>
			<option value = '4'>4</option>
			<option value = '5'>5 (Strongly Agree)</option>
		</select>

		<h3><strong>Question 4</strong></h3>
		<h4>You rarely do something just out of sheer curiosity.</h4>
		<select class ='form-control' id = "q4">
			<option value></option>
			<option value = '1'>1 (Strongly Disagree)</option>
			<option value = '2'>2</option>
			<option value = '3'>3</option>
			<option value = '4'>4</option>
			<option value = '5'>5 (Strongly Agree)</option>
		</select>

		<h3><strong>Question 5</strong></h3>
		<h4>People can rarely upset you.</h4>
		<select class ='form-control' id = "q5">
			<option value></option>
			<option value = '1'>1 (Strongly Disagree)</option>
			<option value = '2'>2</option>
			<option value = '3'>3</option>
			<option value = '4'>4</option>
			<option value = '5'>5 (Strongly Agree)</option>
		</select>

		<h3><strong>Question 6</strong></h3>
		<h4>It is often difficult for you to relate to other people’s feelings.</h4>
		<select class ='form-control' id = "q6">
			<option value></option>
			<option value = '1'>1 (Strongly Disagree)</option>
			<option value = '2'>2</option>
			<option value = '3'>3</option>
			<option value = '4'>4</option>
			<option value = '5'>5 (Strongly Agree)</option>
		</select>

		<h3><strong>Question 7</strong></h3>
		<h4>In a discussion, truth should be more important than people’s sensitivities.</h4>
		<select class ='form-control' id = "q7">
			<option value></option>
			<option value = '1'>1 (Strongly Disagree)</option>
			<option value = '2'>2</option>
			<option value = '3'>3</option>
			<option value = '4'>4</option>
			<option value = '5'>5 (Strongly Agree)</option>
		</select>

		<h3><strong>Question 8</strong></h3>
		<h4>You rarely get carried away by fantasies and ideas.</h4>
		<select class ='form-control' id = "q8">
			<option value></option>
			<option value = '1'>1 (Strongly Disagree)</option>
			<option value = '2'>2</option>
			<option value = '3'>3</option>
			<option value = '4'>4</option>
			<option value = '5'>5 (Strongly Agree)</option>
		</select>

		<h3><strong>Question 9</strong></h3>
		<h4>You think that everyone’s views should be respected regardless of whether they are supported by facts or not.</h4>
		<select class ='form-control' id = "q9">
			<option value></option>
			<option value = '1'>1 (Strongly Disagree)</option>
			<option value = '2'>2</option>
			<option value = '3'>3</option>
			<option value = '4'>4</option>
			<option value = '5'>5 (Strongly Agree)</option>
		</select>

		<h3><strong>Question 10</strong></h3>
		<h4>You feel more energetic after spending time with a group of people.</h4>
		<select class ='form-control' id = "q10">
			<option value></option>
			<option value = '1'>1 (Strongly Disagree)</option>
			<option value = '2'>2</option>
			<option value = '3'>3</option>
			<option value = '4'>4</option>
			<option value = '5'>5 (Strongly Agree)</option>
		</select>
		<hr>
		<button type="submit" class="btn btn-primary btn-lg btn-block" id="submit">Submit</button>

		<div class = "modal fade" id = "friendModal" role = 'dialog'>
			<div class = 'modal-dialog'>
				<div class = 'modal-content'>
					<div class = 'modal-header'>
						<h4 class = 'modal-title' id = 'modalHeader'></h4>
					</div>
					<div class = 'modal-body'>
						<img id="modalImg">
					</div>
					<div class = 'modal-footer'>
						<button type = 'button' class = 'btn btn-default' data-dismiss = 'modal'>Close</button>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div class="container">
		<div class="row">
			<div class="col-md-12">
				<a href="/api/friends">API Friends Link</a>
			</div>
		</div>
		
	</div>

	<script type = 'text/javascript'>
		$("#submit").on('click', function(event){
			event.preventDefault();

			//Determines if the user has filled in each of the questions in the survey. 
			function filledOut(){
				var isFilled = true;
				$(".form-control").each(function(){
					if($(this).val() === ''){
						isFilled = false;
					}
				})
				return isFilled;
			}

			//If the user has filled in each of the survey questions at time of clicking submit, then the below will run. 
			if(filledOut() === true){
				//Stores the user's inputs to an object. 
				var userInput = {
					name: $('#name').val(),
					photo: $('#photo').val(),
					questions: [$('#q1').val(), $('#q2').val(), $('#q3').val(), $('#q4').val(), $('#q5').val(), $('#q6').val(), $('#q7').val(), $('#q8').val(), $('#q9').val(), $('#q10').val(),]
				};

				//Gets the current URL
				var currURL = window.location.origin;

				//Used to prevent the ajax call appending a '[]' to the end of array elements in the objects that are sent through the call. 
				$.ajaxSetup({
					traditional: true
				});

				//Posts the data the user has input, then obtains return data that is used to populate the modal. 
				$.post(currURL + "/api/friends", userInput, function(data){
					$("#modalHeader").text(data.name);
					var src = data.photo;
					$("#modalImg").attr("src", src);
					$("#friendModal").modal('toggle');
				});

				//Empties the survey question values. 
				$('#name').val("");
				$('#photo').val("");
				$('#q1').val(""); 
				$('#q2').val(""); 
				$('#q3').val(""); 
				$('#q4').val(""); 
				$('#q5').val("");
				$('#q6').val("");
				$('#q7').val("");
				$('#q8').val("");
				$('#q9').val("");
				$('#q10').val("");
			}

			//If the user has not completed every question, they will get an alert to finish the entire survey. 
			else{
				alert("Please complete the entire survey.");
			}
		})
	</script>
</body>
</html>	

